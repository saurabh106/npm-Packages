// Generated by CoffeeScript 2.7.0
(function() {
  // src/auditTool.coffee
  var ariaCheck, audit, checkTabIndex, contrastRatio;

  ({contrastRatio} = require("./contrastChecker"));

  ({ariaCheck} = require("./ariaChecker"));

  ({checkTabIndex} = require("./keyboardChecker"));

  audit = function() {
    var bgColor, element, elements, i, len, ratio, results, textColor;
    console.log("Running accessibility audit...");
    elements = document.querySelectorAll("*");
    results = [];
    for (i = 0, len = elements.length; i < len; i++) {
      element = elements[i];
      if (element.tagName === "IMG") {
        ariaCheck(element);
      }
      if (element.hasAttribute("style")) {
        bgColor = window.getComputedStyle(element).backgroundColor;
        textColor = window.getComputedStyle(element).color;
        ratio = contrastRatio(hexToRgb(bgColor), hexToRgb(textColor));
        if (ratio < 4.5) {
          console.warn("Low contrast detected:", element);
        }
      }
      results.push(checkTabIndex(element));
    }
    return results;
  };

  console.log("Accessibility Audit Complete.");

  audit();

}).call(this);
